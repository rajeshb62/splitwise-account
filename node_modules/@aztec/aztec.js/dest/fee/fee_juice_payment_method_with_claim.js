import { Fr, FunctionSelector } from '@aztec/circuits.js';
import { FunctionType } from '@aztec/foundation/abi';
import { ProtocolContractAddress } from '@aztec/protocol-contracts';
import { FeeJuicePaymentMethod } from './fee_juice_payment_method.js';
/**
 * Pay fee directly with Fee Juice claimed on the same tx.
 */
export class FeeJuicePaymentMethodWithClaim extends FeeJuicePaymentMethod {
    constructor(sender, claimAmount, claimSecret) {
        super(sender);
        this.claimAmount = claimAmount;
        this.claimSecret = claimSecret;
    }
    /**
     * Creates a function call to pay the fee in Fee Juice.
     * @returns A function call
     */
    getFunctionCalls() {
        return Promise.resolve([
            {
                to: ProtocolContractAddress.FeeJuice,
                name: 'claim',
                selector: FunctionSelector.fromSignature('claim((Field),Field,Field)'),
                isStatic: false,
                args: [this.sender, new Fr(this.claimAmount), this.claimSecret],
                returnTypes: [],
                type: FunctionType.PRIVATE,
            },
        ]);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmVlX2p1aWNlX3BheW1lbnRfbWV0aG9kX3dpdGhfY2xhaW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZmVlL2ZlZV9qdWljZV9wYXltZW50X21ldGhvZF93aXRoX2NsYWltLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBcUIsRUFBRSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDN0UsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRXBFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRXRFOztHQUVHO0FBQ0gsTUFBTSxPQUFPLDhCQUErQixTQUFRLHFCQUFxQjtJQUN2RSxZQUFZLE1BQW9CLEVBQVUsV0FBd0IsRUFBVSxXQUFlO1FBQ3pGLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUQwQixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFJO0lBRTNGLENBQUM7SUFFRDs7O09BR0c7SUFDTSxnQkFBZ0I7UUFDdkIsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDO1lBQ3JCO2dCQUNFLEVBQUUsRUFBRSx1QkFBdUIsQ0FBQyxRQUFRO2dCQUNwQyxJQUFJLEVBQUUsT0FBTztnQkFDYixRQUFRLEVBQUUsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLDRCQUE0QixDQUFDO2dCQUN0RSxRQUFRLEVBQUUsS0FBSztnQkFDZixJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDO2dCQUMvRCxXQUFXLEVBQUUsRUFBRTtnQkFDZixJQUFJLEVBQUUsWUFBWSxDQUFDLE9BQU87YUFDM0I7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0YifQ==