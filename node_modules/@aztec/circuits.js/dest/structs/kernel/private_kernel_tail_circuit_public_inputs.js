import { AztecAddress } from '@aztec/foundation/aztec-address';
import { BufferReader, serializeToBuffer } from '@aztec/foundation/serialize';
import { countAccumulatedItems, mergeAccumulatedData } from '../../utils/index.js';
import { PartialStateReference } from '../partial_state_reference.js';
import { PublicCallRequest } from '../public_call_request.js';
import { PublicValidationRequests } from '../public_validation_requests.js';
import { RevertCode } from '../revert_code.js';
import { RollupValidationRequests } from '../rollup_validation_requests.js';
import { CombinedAccumulatedData } from './combined_accumulated_data.js';
import { CombinedConstantData } from './combined_constant_data.js';
import { KernelCircuitPublicInputs } from './kernel_circuit_public_inputs.js';
import { PublicAccumulatedData } from './public_accumulated_data.js';
import { PublicKernelCircuitPublicInputs } from './public_kernel_circuit_public_inputs.js';
export class PartialPrivateTailPublicInputsForPublic {
    constructor(
    /**
     * Validation requests accumulated from public functions.
     */
    validationRequests, 
    /**
     * Accumulated side effects and enqueued calls that are not revertible.
     */
    endNonRevertibleData, 
    /**
     * Data accumulated from both public and private circuits.
     */
    end, 
    /**
     * Call request for the public teardown function.
     */
    publicTeardownCallRequest) {
        this.validationRequests = validationRequests;
        this.endNonRevertibleData = endNonRevertibleData;
        this.end = end;
        this.publicTeardownCallRequest = publicTeardownCallRequest;
    }
    getSize() {
        return (this.validationRequests.getSize() +
            this.endNonRevertibleData.getSize() +
            this.end.getSize() +
            this.publicTeardownCallRequest.getSize());
    }
    get needsSetup() {
        return !this.endNonRevertibleData.publicCallStack[0].isEmpty();
    }
    get needsAppLogic() {
        return !this.end.publicCallStack[0].isEmpty();
    }
    get needsTeardown() {
        return !this.publicTeardownCallRequest.isEmpty();
    }
    static fromBuffer(buffer) {
        const reader = BufferReader.asReader(buffer);
        return new PartialPrivateTailPublicInputsForPublic(reader.readObject(PublicValidationRequests), reader.readObject(PublicAccumulatedData), reader.readObject(PublicAccumulatedData), reader.readObject(PublicCallRequest));
    }
    toBuffer() {
        return serializeToBuffer(this.validationRequests, this.endNonRevertibleData, this.end, this.publicTeardownCallRequest);
    }
    static empty() {
        return new PartialPrivateTailPublicInputsForPublic(PublicValidationRequests.empty(), PublicAccumulatedData.empty(), PublicAccumulatedData.empty(), PublicCallRequest.empty());
    }
}
export class PartialPrivateTailPublicInputsForRollup {
    constructor(rollupValidationRequests, end) {
        this.rollupValidationRequests = rollupValidationRequests;
        this.end = end;
    }
    static fromBuffer(buffer) {
        const reader = BufferReader.asReader(buffer);
        return new PartialPrivateTailPublicInputsForRollup(reader.readObject(RollupValidationRequests), reader.readObject(CombinedAccumulatedData));
    }
    getSize() {
        return this.rollupValidationRequests.getSize() + this.end.getSize();
    }
    toBuffer() {
        return serializeToBuffer(this.rollupValidationRequests, this.end);
    }
    static empty() {
        return new PartialPrivateTailPublicInputsForRollup(RollupValidationRequests.empty(), CombinedAccumulatedData.empty());
    }
}
export class PrivateKernelTailCircuitPublicInputs {
    constructor(
    /**
     * Data which is not modified by the circuits.
     */
    constants, 
    /**
     * Indicates whether execution of the public circuit reverted.
     */
    revertCode, 
    /**
     * The address of the fee payer for the transaction.
     */
    feePayer, forPublic, forRollup) {
        this.constants = constants;
        this.revertCode = revertCode;
        this.feePayer = feePayer;
        this.forPublic = forPublic;
        this.forRollup = forRollup;
        if (!forPublic && !forRollup) {
            throw new Error('Missing partial public inputs for private tail circuit.');
        }
        if (forPublic && forRollup) {
            throw new Error('Cannot create PrivateKernelTailCircuitPublicInputs that is for both public kernel circuit and rollup circuit.');
        }
    }
    get publicInputs() {
        return (this.forPublic ?? this.forRollup);
    }
    getSize() {
        return ((this.forPublic?.getSize() ?? 0) +
            (this.forRollup?.getSize() ?? 0) +
            this.constants.getSize() +
            this.revertCode.getSerializedLength() +
            this.feePayer.size);
    }
    toPublicKernelCircuitPublicInputs() {
        if (!this.forPublic) {
            throw new Error('Private tail public inputs is not for public circuit.');
        }
        return new PublicKernelCircuitPublicInputs(this.constants, this.forPublic.validationRequests, this.forPublic.endNonRevertibleData, this.forPublic.end, 0, // endSideEffectCounter
        this.forPublic.publicTeardownCallRequest, this.feePayer, this.revertCode);
    }
    toKernelCircuitPublicInputs() {
        if (!this.forRollup) {
            throw new Error('Private tail public inputs is not for rollup circuit.');
        }
        return new KernelCircuitPublicInputs(this.forRollup.rollupValidationRequests, this.forRollup.end, this.constants, PartialStateReference.empty(), this.revertCode, this.feePayer);
    }
    numberOfPublicCallRequests() {
        return (this.numberOfNonRevertiblePublicCallRequests() +
            this.numberOfRevertiblePublicCallRequests() +
            (this.hasTeardownPublicCallRequest() ? 1 : 0));
    }
    numberOfNonRevertiblePublicCallRequests() {
        return this.forPublic ? countAccumulatedItems(this.forPublic.endNonRevertibleData.publicCallStack) : 0;
    }
    numberOfRevertiblePublicCallRequests() {
        return this.forPublic ? countAccumulatedItems(this.forPublic.end.publicCallStack) : 0;
    }
    hasTeardownPublicCallRequest() {
        return this.forPublic ? !this.forPublic.publicTeardownCallRequest.isEmpty() : false;
    }
    getNonRevertiblePublicCallRequests() {
        return this.forPublic ? this.forPublic.endNonRevertibleData.publicCallStack.filter(r => !r.isEmpty()) : [];
    }
    getRevertiblePublicCallRequests() {
        return this.forPublic ? this.forPublic.end.publicCallStack.filter(r => !r.isEmpty()) : [];
    }
    getTeardownPublicCallRequest() {
        const publicTeardownCallRequest = this.forPublic?.publicTeardownCallRequest;
        return !publicTeardownCallRequest?.isEmpty() ? publicTeardownCallRequest : undefined;
    }
    getNonEmptyNoteHashes() {
        const noteHashes = this.forPublic
            ? mergeAccumulatedData(this.forPublic.endNonRevertibleData.noteHashes, this.forPublic.end.noteHashes).map(n => n.value)
            : this.forRollup.end.noteHashes;
        return noteHashes.filter(n => !n.isZero());
    }
    getNonEmptyNullifiers() {
        const nullifiers = this.forPublic
            ? mergeAccumulatedData(this.forPublic.endNonRevertibleData.nullifiers, this.forPublic.end.nullifiers).map(n => n.value)
            : this.forRollup.end.nullifiers;
        return nullifiers.filter(n => !n.isZero());
    }
    static fromBuffer(buffer) {
        const reader = BufferReader.asReader(buffer);
        const isForPublic = reader.readBoolean();
        return new PrivateKernelTailCircuitPublicInputs(reader.readObject(CombinedConstantData), reader.readObject(RevertCode), reader.readObject(AztecAddress), isForPublic ? reader.readObject(PartialPrivateTailPublicInputsForPublic) : undefined, !isForPublic ? reader.readObject(PartialPrivateTailPublicInputsForRollup) : undefined);
    }
    toBuffer() {
        const isForPublic = !!this.forPublic;
        return serializeToBuffer(isForPublic, this.constants, this.revertCode, this.feePayer, isForPublic ? this.forPublic.toBuffer() : this.forRollup.toBuffer());
    }
    static empty() {
        return new PrivateKernelTailCircuitPublicInputs(CombinedConstantData.empty(), RevertCode.OK, AztecAddress.ZERO, undefined, PartialPrivateTailPublicInputsForRollup.empty());
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpdmF0ZV9rZXJuZWxfdGFpbF9jaXJjdWl0X3B1YmxpY19pbnB1dHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc3RydWN0cy9rZXJuZWwvcHJpdmF0ZV9rZXJuZWxfdGFpbF9jaXJjdWl0X3B1YmxpY19pbnB1dHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQy9ELE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUU5RSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUM1RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDNUUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDekUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDbkUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDOUUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDckUsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFFM0YsTUFBTSxPQUFPLHVDQUF1QztJQUNsRDtJQUNFOztPQUVHO0lBQ0ksa0JBQTRDO0lBQ25EOztPQUVHO0lBQ0ksb0JBQTJDO0lBQ2xEOztPQUVHO0lBQ0ksR0FBMEI7SUFDakM7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